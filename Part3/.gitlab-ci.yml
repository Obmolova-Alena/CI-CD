stages:
 - build
 - code_style

build_job:
    stage: build
    image: ubuntu:22.04
    before_script:
      - sudo apt-get update && sudo apt-get install -y build-essential  
    script:
      - cd src_simplebash/cat
      - make
      - cd ../grep
      - make
    artifacts:
      paths:
       - src_simplebash/cat/s21_cat
       - src_simplebash/grep/s21_grep

code_style:
    stage: code_style
    image: ubuntu:22.04
    script:
      - cp materials/linters/.clang-format src_simplebash/cat/
      - cp materials/linters/.clang-format src_simplebash/grep/
      - cd src_simplebash/cat
      - clang-format -i *.c *.h
      - cd ../grep
      - clang-format -i *.c *.h
      - cd ../ 
      - |
        if clang-format -n cat/*.c cat/*.h && clang-format -n grep/*.c grep/*.h ; then
          echo "Успех" 
        else
          echo "Ошибка код стайла" 
          exit 1;
        fi
